{% extends "parent.html" %}

{% block title %} - All Jugglers{% endblock %}

{% block initjs %}
<script type="text/javascript">

$().ready(function() {
  var force_two_checked = function() {
    var checkboxes = document.getElementsByName('juggler');
    var count = 0;
    for (var i in checkboxes) {
      if (checkboxes[i].checked == true) {
        count++;
      }
    }

    var submit = $('#submit_button');
    if (count == 2) {
      submit[0].disabled = false;
      submit.removeClass('disabled');
    } else {
      submit[0].disabled = true;
      submit.addClass('disabled');
    }
  }

  force_two_checked();

  $('#jugglers').dataTable({
    "bFilter": false,
    "bInfo": false,
    "bPaginate": false,
    "aaSorting": [[ 2, "desc" ]],
    "aoColumns": [null, {"sType": "html"}, null, null]
  });
  $('#jugglers').css('width', '100%');
  
  $('.juggle_check').click(force_two_checked);
  
  $('#sidebar').load('/juggletrack/dashboard');

  //draw chart
  /*
  var options = {
    lines: { show: true },
    points: { show: true },
    xaxis: { mode: 'time'},
  };
  var data = [];
  var chartdiv = $("#overall_score_vs_time_chart");
    
  var onDataReceived = function(series) {
      data.push(series);
      $.plot(chartdiv, data, options);
  };
        
  $.ajax({
    url: 'jugglers/overall_score_chart_data',
    method: 'GET',
    dataType: 'json',
    success: onDataReceived
  });
  */
});
</script>
{% endblock %}

{% block content %}
<div class="container">
    <div id="left" class="span-18">
        <h2>Jugglers</h2>

<!-- Move to some other overall stats page -->
<!--
<h4>Overall Score Total vs. Time</h4>
<div id="overall_score_vs_time_chart" style="width:800px;height:200px;"></div>
-->

        <form action="juggler_diff" method="get">
            <table id="jugglers" class="display">
                <thead>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th>Score</th>
                        <th>Affiliation</th>
                    </tr>
                </thead>
                <tbody>
                    {% for juggler in jugglers %}
                        <tr>
                            <td><input type="checkbox" name="juggler" value="{{juggler.id}}" class="juggle_check" /></td>
                            <td><a href="juggler/{{juggler.id}}/">{{ juggler.get_name }}</a></td>
                            <td>{{juggler.score|floatformat:2}}</td>
                            <td>{{juggler.affiliation.name}}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <button onclick="$(form).submit()" id="submit_button">Compare</button>
        </form>
    </div>
    <div id="sidebar" class="span-6 last">
    Sidebar goes here
    </div>
</div>
{% endblock %}

